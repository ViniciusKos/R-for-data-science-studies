---
title: "R Notebook"
output: html_notebook
---


# 0.0 Imports

```{r}
renv::snapshot()
```

```{r}
options(scipen = 999)
options(digits = 3)
```


```{r}
library(tidyverse)
library(nycflights13)
```

# 1.0 Making Numbers


```{r}
x <- c("1.2", "1.5e2", "7.8")
parse_double(x)
```

```{r}
x <- c("$1,234", "R$ 3,456",  "506,503.24%")
parse_number(x)
```

# 2.0 Counts

```{r}
flights |> 
  group_by(tailnum) |> 
  summarize(miles = sum(distance))

flights |> count(tailnum, wt = distance)

```

```{r}
flights |> 
  group_by(dest) |> 
  summarize(n_cancelled = sum(is.na(dep_time)))
```

## 2.1 Exercises

```{r}
#1.0
flights |> count(is.na(dep_time))

#2.0
flights |>
  group_by(dest) |> 
  summarize(n = n()) |> 
  arrange(n)

flights |> 
  group_by(tailnum) |> 
  summarize(sum(distance))

```

# 3.0 Numeric Transformations

```{r}
x <- c(1, 2, 10, 20)
x * c(1, 2)

x * c(1, 2, 3)
```

```{r}
flights |> 
  filter(month == c(1, 2, 3))
```

```{r}
df <- tribble(
  ~x, ~y,
  1, 3,
  5, 2,
  7, NA,
)

df |> 
  mutate(min = pmin(x, y, na.rm = TRUE),
         max = pmax(x, y, na.rm = TRUE))


```

```{r}
head(flights)
```


```{r}
flights |> 
  mutate(
    hour = sched_dep_time %/% 100, 
    minute = sched_dep_time %% 100,
    .keep = "used"
  )

```


```{r}
flights |> 
  group_by(hour = sched_dep_time %/% 100) |> 
  summarize(prop_cancelled = mean(is.na(dep_time)), n = n()) |> 
  filter(hour > 1) |> 
  ggplot(aes(x = hour, y = prop_cancelled)) +
  geom_line(color = "grey50") +
  geom_point(aes(size = n))
  
```

```{r}

```

